"use strict";!function(e){class t{constructor(e,t={}){if(!e)throw new Error("ZidoWidget requires an orgId");this.orgId=e,this.baseUrl=t.baseUrl||"https://book.trupod.co",this.iframeUrl=`${this.baseUrl}/embed/${e}/items`,this.origin=this.baseUrl,this.overlayId="zidoIframeOverlay",this.iframeId="zidoDynamicIframe",window.addEventListener("message",this._onMessage.bind(this))}_onMessage(e){if(e.origin!==this.origin)return;const{type:t}=e.data||{};"ZIDO_CLOSE_WIDGET"===t&&this.close()}open(){let e=document.getElementById(this.overlayId);e||(e=document.createElement("div"),e.id=this.overlayId,e.style.cssText="\n          display:none;\n          position:fixed; top:0; left:0; width:100%; height:100%;\n          background:rgba(0,0,0,0.5); z-index:9999;\n        ",document.body.appendChild(e));const t=document.getElementById(this.iframeId);t&&t.remove();const i=document.createElement("iframe");i.src=this.iframeUrl,i.id=this.iframeId,i.style.cssText="width:100%; height:100%; border:none;",i.sandbox="allow-scripts allow-same-origin allow-popups allow-forms",e.appendChild(i),e.style.display="block"}close(){const e=document.getElementById(this.overlayId);e&&(e.style.display="none");const t=document.getElementById(this.iframeId);t&&t.remove()}destroy(){this.close();const e=document.getElementById(this.overlayId);e&&e.remove(),window.removeEventListener("message",this._onMessage.bind(this))}isOpen(){const e=document.getElementById(this.overlayId);return e&&"block"===e.style.display}}"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):e.ZidoWidget=t}("undefined"!=typeof window?window:this);